# biolog_calendar.py

## ðŸ“Œ ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
Ð­Ñ‚Ð¾Ñ‚ Python-ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¿Ñ€ÐµÐ´Ð½Ð°Ð·Ð½Ð°Ñ‡ÐµÐ½ Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ñ€Ð°Ð±Ð¾Ñ‡ÐµÐ³Ð¾ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ°.  
ÐžÐ½ ÐµÐ¶ÐµÐ´Ð½ÐµÐ²Ð½Ð¾ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ÑÑ Ðº **RetailCRM**, Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ Ð²ÑÐµ Ð·Ð°ÐºÐ°Ð·Ñ‹, ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‰Ð¸Ðµ ÑƒÑÐ»ÑƒÐ³Ñƒ **Â«Ð’Ñ‹ÐµÐ·Ð´ Ð±Ð¸Ð¾Ð»Ð¾Ð³Ð°Â»**, Ð¸ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ Ð² **Google ÐšÐ°Ð»ÐµÐ½Ð´Ð°Ñ€Ðµ**.  

Ð­Ñ‚Ð¾ Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÐµÑ‚:
- ÑƒÐ¿Ñ€Ð¾ÑÑ‚Ð¸Ñ‚ÑŒ Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð²Ñ‹ÐµÐ·Ð´Ð¾Ð²;
- Ð¾Ð±ÐµÑÐ¿ÐµÑ‡Ð¸Ñ‚ÑŒ Ð²Ð¸Ð´Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð´Ð»Ñ Ð²ÑÐµÑ… Ð·Ð°Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ¾Ð²Ð°Ð½Ð½Ñ‹Ñ… ÑÑ‚Ð¾Ñ€Ð¾Ð½.

---

## ðŸ”‘ ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸
- **ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹** â€” ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ ÑÐ¾Ð·Ð´Ð°ÑŽÑ‚ÑÑ Ð² Google ÐšÐ°Ð»ÐµÐ½Ð´Ð°Ñ€Ðµ Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸Ð· Ð·Ð°ÐºÐ°Ð·Ð¾Ð².  
- **Ð“Ð¸Ð±ÐºÐ¸Ð¹ Ð¿Ð¾Ð¸ÑÐº** â€” Ð¿Ð¾Ð¸ÑÐº Ð·Ð°ÐºÐ°Ð·Ð¾Ð² Ð¿Ð¾ Ð°Ñ€Ñ‚Ð¸ÐºÑƒÐ»Ð°Ð¼ ÑƒÑÐ»ÑƒÐ³ Ð´Ð»Ñ Ñ‚Ð¾Ñ‡Ð½Ð¾ÑÑ‚Ð¸ Ð¸ Ð½Ð°Ð´ÐµÐ¶Ð½Ð¾ÑÑ‚Ð¸.  
- **Ð˜Ð½Ñ‚ÐµÐ»Ð»ÐµÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ** â€” Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ `token.pickle` Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ñ‚Ð¾ÐºÐµÐ½Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° (Ð±ÐµÐ· Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾Ð¹ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸).  
- **Ð”ÐµÑ‚Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ** â€” ÐºÐ°Ð¶Ð´Ð¾Ðµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ðµ Ð² ÐºÐ°Ð»ÐµÐ½Ð´Ð°Ñ€Ðµ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚:
  - Ð¸Ð¼Ñ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°,  
  - Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½,  
  - Ð¸Ð¼Ñ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ð°,  
  - Ð¸Ð¼Ñ Ð±Ð¸Ð¾Ð»Ð¾Ð³Ð°,  
  - Ð¿Ñ€ÑÐ¼ÑƒÑŽ ÑÑÑ‹Ð»ÐºÑƒ Ð½Ð° Ð·Ð°ÐºÐ°Ð· Ð² RetailCRM.  
- **Ð–ÑƒÑ€Ð½Ð°Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ** â€” Ð²ÑÐµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ Ð¿Ð¸ÑˆÑƒÑ‚ÑÑ Ð² Ð»Ð¾Ð³-Ñ„Ð°Ð¹Ð» Ð´Ð»Ñ ÑƒÐ´Ð¾Ð±Ð½Ð¾Ð¹ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸ Ð¸ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°.  

---

## ðŸ›  Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼Ñ‹Ðµ Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸
- Python 3.x  
- [Google API Client for Python](https://github.com/googleapis/google-api-python-client)  
- requests  
- python-dotenv  

---

## ðŸš€ ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°

### 1. ÐšÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ
```bash
git clone https://github.com/Lavr-18/RetailCRM_to_GoogleCalendar.git
cd RetailCRM_to_GoogleCalendar
```

### 2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° ÑÑ€ÐµÐ´Ñ‹
Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸:
```bash
python3 -m venv .venv
source .venv/bin/activate  # Ð”Ð»Ñ Linux/macOS
.\.venv\Scripts\activate   # Ð”Ð»Ñ Windows
pip install -r requirements.txt
```

### 3. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° ÑƒÑ‡ÐµÑ‚Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…
Ð”Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ ÑÐºÑ€Ð¸Ð¿Ñ‚Ñƒ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹ API-ÐºÐ»ÑŽÑ‡Ð¸ Ð¸ ÑƒÑ‡ÐµÑ‚Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ.

**RetailCRM**:
- Ð’ Ð»Ð¸Ñ‡Ð½Ð¾Ð¼ ÐºÐ°Ð±Ð¸Ð½ÐµÑ‚Ðµ ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ API-ÐºÐ»ÑŽÑ‡ Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð¾Ð¼ Ðº Ð¼ÐµÑ‚Ð¾Ð´Ð°Ð¼ `orders` Ð¸ `orders.custom-fields`.

**Google Calendar**:
1. Ð’ Google Cloud Console ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚.  
2. Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ðµ **Google Calendar API**.  
3. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÑƒÑ‡ÐµÑ‚Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ñ‚Ð¸Ð¿Ð° **OAuth 2.0 Client ID** Ð´Ð»Ñ Ð´ÐµÑÐºÑ‚Ð¾Ð¿Ð½Ð¾Ð³Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ.  
4. Ð¡ÐºÐ°Ñ‡Ð°Ð¹Ñ‚Ðµ Ñ„Ð°Ð¹Ð» `credentials.json`.  

**token.pickle**:
- Ð¡Ð¾Ð·Ð´Ð°ÐµÑ‚ÑÑ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€Ð²Ð¾Ð¼ Ð·Ð°Ð¿ÑƒÑÐºÐµ Ð¸ Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ Ñ‚Ð¾ÐºÐµÐ½Ñ‹ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸.

**.env Ñ„Ð°Ð¹Ð»** (ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð² ÐºÐ¾Ñ€Ð½ÐµÐ²Ð¾Ð¹ Ð¿Ð°Ð¿ÐºÐµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°):
```ini
RETAILCRM_BASE_URL="https://tropichouse.retailcrm.ru"
RETAILCRM_API_KEY="Ð’ÐÐ¨_ÐšÐ›Ð®Ð§_API"
RETAILCRM_SITE_CODE="tropichouse"

# Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ÑÑ Ð¿Ð¾ÑÐ»Ðµ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÐ° ÑÐºÑ€Ð¸Ð¿Ñ‚Ð°
# GOOGLE_CALENDAR_ID="ID_Ð’ÐÐ¨Ð•Ð“Ðž_ÐšÐÐ›Ð•ÐÐ”ÐÐ Ð¯"
```

---

### 4. ÐŸÐµÑ€Ð²Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº
ÐŸÑ€Ð¸ Ð¿ÐµÑ€Ð²Ð¾Ð¼ Ð·Ð°Ð¿ÑƒÑÐºÐµ Ð¾Ñ‚ÐºÑ€Ð¾ÐµÑ‚ÑÑ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€ Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸:
```bash
python biolog_calendar.py
```
ÐŸÐ¾ÑÐ»Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¹ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸:
- Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ Ñ„Ð°Ð¹Ð» `token.pickle`;  
- Ð² ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ Ð²Ñ‹Ð²ÐµÐ´ÐµÑ‚ÑÑ `ID` Ð½Ð¾Ð²Ð¾Ð³Ð¾ ÐºÐ°Ð»ÐµÐ½Ð´Ð°Ñ€Ñ, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð½ÑƒÐ¶Ð½Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð² `.env`.

---

## âš¡ ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð·Ð°Ð¿ÑƒÑÐº (Cron)
Ð”Ð»Ñ ÐµÐ¶ÐµÐ´Ð½ÐµÐ²Ð½Ð¾Ð³Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÐ° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ñ‰Ð¸Ðº **Cron**.

ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ crontab:
```bash
crontab -e
```

Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ ÑÑ‚Ñ€Ð¾ÐºÑƒ Ð´Ð»Ñ Ð·Ð°Ð¿ÑƒÑÐºÐ° ÑÐºÑ€Ð¸Ð¿Ñ‚Ð° ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ Ð² **20:00**:
```bash
0 20 * * * /usr/bin/python3 /Ð¿ÑƒÑ‚ÑŒ/Ðº/Ð¿Ð°Ð¿ÐºÐµ/Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°/biolog_calendar.py >> /Ð¿ÑƒÑ‚ÑŒ/Ðº/Ð¿Ð°Ð¿ÐºÐµ/Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°/biolog_calendar.log 2>&1
```

---
